function updateHTML(){const t=document.querySelectorAll("[data-stein-url]");for(let e,n=0;e=t[n];n++){const t=e.dataset.steinSearch,n=e.dataset.steinLimit,o=e.dataset.steinOffset;let s=e.dataset.steinUrl;if(s=s.endsWith("/")?s:s+"/","FORM"===e.tagName)return configureForm(e,s);e.style.display="none",fetchData({URL:s,search:t,limit:n,offset:o}).then(t=>{const n=[];for(let o=0;o<t.length;o++)n.push(e.innerHTML);const o=n.map((e,n)=>interpolateString(e,t[n]));e.innerHTML=o.join(""),e.style.display=""}).catch(t=>{throw console.log(t),new Error(t)})}}function fetchData({URL:t,search:e,limit:n,offset:o}){const s=`${t}?${[n?`limit=${n}`:"",o?`offset=${o}`:"",e?`search=${e}`:""].join("&")}`;return new Promise((t,e)=>{fetch(s).then(t=>t.json()).then(n=>{n.ok?t(n):e(n)}).catch(t=>e(t))})}function interpolateString(t,e){return t.replace(/{{([^{}]*)}}/g,(t,n)=>{const o=e[n];return"string"==typeof o?o:t})}function configureForm(t,e){t.addEventListener("submit",n=>{n.preventDefault();let o=new FormData(t);const s={};o.forEach((t,e)=>{s[e]=t});const r={method:"POST",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify([s])};fetch(e,r).then(t=>new Promise(e=>t.json().then(n=>e({status:t.status,body:n})))).then(t=>{const e=new CustomEvent("ResponseReceived",{detail:t});n.target.dispatchEvent(e)}).catch(t=>{throw new Error(t)})})}document.addEventListener("DOMContentLoaded",updateHTML);